<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>Item DerpartmentMarkYourCalendar</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:ManagedPropertyMapping msdt:dt="string">&#39;Picture URL&#39;{Picture URL}:&#39;PublishingImage;PictureURL;PictureThumbnailURL&#39;,&#39;Link URL&#39;{Link URL}:&#39;Path&#39;,&#39;Line 1&#39;{Line 1}:&#39;Title&#39;,&#39;Line 2&#39;{Line 2}:&#39;EventDate&#39;,&#39;Line 3&#39;{Line 3}:&#39;EventEndDate&#39;,&#39;SecondaryFileExtension&#39;,&#39;ContentTypeId&#39;</mso:ManagedPropertyMapping>
<mso:MasterPageDescription msdt:dt="string">This Item Display Template will show a 100x100 picture of the item on the left. The title and the default item description will display to the right of the picture with an additional line that is available for a custom managed property.</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#Content Web Parts;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:HtmlDesignStatusAndPreview msdt:dt="string">http://icsp2016dev102:8081/_catalogs/masterpage/Display%20Templates/Content%20Web%20Parts/Item_DepartmentMarkYourCalendar.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<body>

    <!--
            Warning: Do not try to add HTML to this section. Only the contents of the first <div>
            inside the <body> tag will be used while executing Display Template code. Any HTML that
            you add to this section will NOT become part of your Display Template.
    -->
    <script>
        $includeLanguageScript(this.url, "~sitecollection/_catalogs/masterpage/Display Templates/Language Files/{Locale}/CustomStrings.js");
    </script>

    <!--
        Use the div below to author your Display Template. Here are some things to keep in mind:
        * Surround any JavaScript logic as shown below using a "pound underscore" (#_ ... _#) token
        inside a comment.

        * Use the values assigned to your variables using an "underscore pound equals"
        (_#= ... =#_) token.
    -->

    <div id="TwoLines">
<!--#_
var monthNames = ["January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December"
];
var days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
var encodedId = $htmlEncode(ctx.ClientControl.get_nextUniqueId() + "_2lines_");

var linkURL = $getItemValue(ctx, "Link URL");
linkURL.overrideValueRenderer($urlHtmlEncode);
var iconURL = Srch.ContentBySearch.getIconSourceFromItem(ctx.CurrentItem);

var line1 = $getItemValue(ctx, "Line 1");
var line2 = $getItemValue(ctx, "Line 2");
var line3 = $getItemValue(ctx, "Line 3");
var line4 = $getItemValue(ctx, "Line 4");



line1.overrideValueRenderer($contentLineText);
line2.overrideValueRenderer($contentLineText);
line3.overrideValueRenderer($contentLineText);
line4.overrideValueRenderer($contentLineText);

var tag = document.createElement('div');
tag.innerHTML = line1.value;
if(tag.innerText.length> 62)
{
	var Title = tag.innerText.substring(0,30) + "… ";
}
else
{
	var Title = tag.innerText== "null" ? "" : tag.innerText ;
}


var containerId = encodedId + "container";
var pictureLinkId = encodedId + "pictureLink";
var pictureId = encodedId + "picture";
var dataContainerId = encodedId + "dataContainer";
var line1LinkId = encodedId + "line1Link";
var alldayEvent = ctx.CurrentItem.IsAllDayEvent;
var line1Id = encodedId + "line1";
var line2Id = encodedId + "line2";

var day='',month='',mon='',year=''
if(typeof(line2.value)!='object' && line2.value!=null){
	year=line2.value!=null?new Year[new Year(line2.value.split('Z')[0] + "Z").getYear()]:'';
	month=line2.value!=null?monthNames[new Date(line2.value.split('Z')[0] + "Z").getMonth()]:'';
	date=line2.value!=null?new Date(line2.value.split('Z')[0] + "Z").getDate():'';
	
	
	
}else if(typeof(line2.value)=='object')
{
	mon= moment(line2.value);
	 Month = mon.format('MMM')
	date= moment(line2.value).date();
    year = moment(line2.value).year();

	
	
}
var line3Id = encodedId + "line3";
var line4Id = encodedId + "line4";

var date11 = new Date(line2.value);
//var utcDate =  new Date(Date.UTC(date11.getUTCFullYear(), date11.getUTCMonth(), date11.getUTCDate(),  date11.getUTCHours(), date11.getUTCMinutes(), date11.getUTCSeconds()));
var date1 = new Date(date11);
var hrs = date1.getHours();
var min=((date1.getMinutes()<10?'0':'') + date1.getMinutes());
if (alldayEvent == "True")
{

hrs="00" ;
min="00" ;
}

var actualhrs = (hrs >= 12) ? hrs -12 : hrs;
var ampm = (hrs >= 12) ? "PM" : "AM";


if(actualhrs == 0)
{
  actualhrs= 12;
}


_#-->
                                <section class="markcalendar-bg">
                                <div class="markcalendar-leftbar"></div>
                                  <div class="markcalendar-content pull-left">                                                                             
                              
                                  <div class="markcalendar-month">_#=Month=#__#= date =#_,_#= year =#_</div>
	                           <div class="markcalendar-title">

                                	_#= Title =#_
                           </div>
                          <div class="markcalendar-details">

                                  <div class="markcalendar-time"><i class="fa fa-clock-o" aria-hidden="true"></i>_#= actualhrs =#_ _#= min =#_ _#= ampm =#_</div>                                                                                                                            
                            </div>
                            </div>
                                </section>
                     
</div>
</body>
</html>

