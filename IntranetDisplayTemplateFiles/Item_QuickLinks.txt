<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
	<title>Item_Quick_Links</title>
  
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:ManagedPropertyMapping msdt:dt="string">&#39;OpenLinkInNewWindow&#39;:&#39;OpenLinkInNewWindow&#39;, &#39;OpenLinkInNewWindowOWSBOOL&#39;:&#39;OpenLinkInNewWindowOWSBOOL&#39;, &#39;LinkURLOWSURLH&#39;:&#39;LinkURLOWSURLH&#39;,&#39;Link URL&#39;{Link URL}:&#39;QuickLinkURL&#39;,&#39;Line 1&#39;{Line 1}:&#39;Title&#39;,&#39;Department&#39;{Department}:&#39;EmployeeDepartment&#39;,&#39;Line 2&#39;{Line 2}:&#39;LinkURL&#39;,&#39;Description&#39;</mso:ManagedPropertyMapping>
<mso:MasterPageDescription msdt:dt="string">This Item Display Template will show a small thumbnail icon next to a hyperlink of the item title, with an additional line that is available for a custom managed property.</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106603</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#Content Web Parts;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:CrawlerXSLFile msdt:dt="string"></mso:CrawlerXSLFile>
<mso:HtmlDesignPreviewUrl msdt:dt="string"></mso:HtmlDesignPreviewUrl>

<mso:HtmlDesignStatusAndPreview msdt:dt="string">http://icsp2016dev102:8081/_catalogs/masterpage/Display%20Templates/Content%20Web%20Parts/Item_QuickLinks.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
<body>
    <!--
            Warning: Do not try to add HTML to this section. Only the contents of the first <div>
            inside the <body> tag will be used while executing Display Template code. Any HTML that
            you add to this section will NOT become part of your Display Template.
    -->
    <script>
        $includeLanguageScript(this.url, "~sitecollection/_catalogs/masterpage/Display Templates/Language Files/{Locale}/CustomStrings.js");
    </script>
    <!--
        Use the div below to author your Display Template. Here are some things to keep in mind:
        * Surround any JavaScript logic as shown below using a "pound underscore" (#_ ... _#) token
        inside a comment.

        * Use the values assigned to your variables using an "underscore pound equals"
        (_#= ... =#_) token.
    -->
    <div>
	<!--#_
		
		//Getting Title	
		var line1 = $getItemValue(ctx, "Line 1");		
		var dep = $getItemValue(ctx, "Department");
		var userProperty = NBB.GetCurrentUserDepartment();
		var departmentData,department="";
		
		if(dep.value != null)
		{
			departmentData = dep.value.split("\n");
			department = departmentData[0];
		}
		//Get Open In New Window property value
		var IsOpenNewWindow = $getItemValue(ctx, "OpenLinkInNewWindowOWSBOOL");	
		//Get QuickLink URL
		var url = $getItemValue(ctx, "LinkURLOWSURLH");
		var urlToRedirect = url.value[0].entityId;
		
		if(IsOpenNewWindow == "Yes" &&(department==userProperty))
		{
		_#-->
			<div class="truncate"><a href="_#= urlToRedirect =#_" target="_blank" title="_#= $htmlEncode(line1.defaultValueRenderer(line1)) =#_"><i class="fa fa-angle-right" aria-hidden="true"></i>_#= line1 =#_ </a></div>
		
		<!--#_
		}
		else if(department==userProperty || department=="")
		{
		_#-->
			<div class="truncate"><a href="_#= urlToRedirect =#_" target="_self" title="_#= $htmlEncode(line1.defaultValueRenderer(line1)) =#_" ><i class="fa fa-angle-right" aria-hidden="true"></i>_#= line1 =#_ </a></div>
		<!--#_
		}
		_#-->	          
	</div> 
</body>
</html>
